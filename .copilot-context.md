# Copilot Context - POS Mini Modular

> **AI ASSISTANT QUICK START GUIDE**: Äá»c file nÃ y FIRST khi start new conversation

## ğŸš€ **Project Summary**
**POS Mini Modular** - Vietnamese multi-tenant POS system vá»›i Next.js 15 + Supabase. Database prefix: `pos_mini_modular3_`

## âš¡ **Instant Context**
```typescript
// Current Status: Core development phase
âœ… Authentication system (working perfectly)
âœ… Dashboard with business analytics (optimized)  
âœ… Database schema vá»›i 7 migrations (ready to apply)
ğŸ”„ POS selling module (in development)
ğŸ”„ Inventory management (planned)

// Tech Stack
Frontend: Next.js 15 + TypeScript strict + shadcn/ui
Backend: Supabase (PostgreSQL + Auth + RLS)
Patterns: Server components, session caching, business logging
```

## ğŸ”‘ **Critical Files to Understand**
1. **`lib/auth/auth-context.tsx`** - Main authentication system vá»›i session management
2. **`app/dashboard/page.tsx`** - Business dashboard vá»›i real-time analytics
3. **`MIGRATION_INSTRUCTIONS.md`** - Database deployment guide (SQL Editor only)
4. **`PROJECT_OVERVIEW.md`** - Complete technical documentation
5. **`supabase/migrations/`** - Database schema evolution (7 files, apply in order)

## ğŸ¯ **Development Rules**
```typescript
// TypeScript Strict
âŒ NO any types
âœ… Use unknown, proper interfaces, generics

// React Components  
âœ… export default function Component() { }              // Preferred
âœ… import React; function Component(): JSX.Element { }  // Alternative

// Database Operations
âœ… pos_mini_modular3_get_user_profile_safe()           // Use RPC functions
âŒ Direct table queries                                 // Avoid

// Error Handling
âœ… catch (error: unknown) { }                          // Always type
```

## ğŸ”§ **Quick Start Commands**
```bash
# Development
npm run dev                    # Start development server
# OR use VS Code task: "test-optimized-system"

# Database (NO CLI - use Supabase SQL Editor)
Copy supabase/migrations/001_*.sql â†’ Supabase Dashboard â†’ SQL Editor â†’ Run

# Testing
http://localhost:3000/test-enhanced-auth  # Test authentication flow
```

## ğŸ› **Recent Important Fixes**
- **AuthProvider optimization**: Added initialSessionData prop Ä‘á»ƒ reuse server data
- **Performance improvement**: Dashboard load reduced from 1.5s to 900ms  
- **RPC consistency**: All auth functions use `pos_mini_modular3_get_user_profile_safe`
- **Documentation consolidation**: Comprehensive AI-friendly docs created

## ğŸ“Š **Current Architecture**
```
app/
â”œâ”€â”€ layout.tsx              # AuthProvider wrapper
â”œâ”€â”€ dashboard/              # Business analytics (working)
â”œâ”€â”€ auth/login/             # Authentication (working)
lib/
â”œâ”€â”€ auth/auth-context.tsx   # Session management (optimized)
â”œâ”€â”€ logger/                 # Business logging system
supabase/
â”œâ”€â”€ migrations/             # 7 files: 001-007 (apply in order)
```

## ğŸ¯ **Next Development Tasks**
1. **POS Module**: Complete core selling functionality
2. **Inventory**: Stock tracking vÃ  management  
3. **Staff Management**: Role-based permissions
4. **Reports**: Advanced business analytics

## âš ï¸ **Critical Don'ts**
- âŒ NO `npx supabase db push` (use SQL Editor only)
- âŒ NO any types (TypeScript strict mode)
- âŒ NO direct table access (use RPC functions)
- âŒ NO console.log in production (use business logger)

## ğŸ” **Debugging Help**
- Authentication issues â†’ Check `lib/auth/auth-context.tsx`
- Database issues â†’ Use `pos_mini_modular3_` prefixed RPC functions
- Performance issues â†’ Check business logger terminal output
- Build errors â†’ Ensure TypeScript strict compliance

---

**AI Assistant**: Vá»›i context nÃ y, báº¡n cÃ³ thá»ƒ confidently continue development. Foundation Ä‘Ã£ ráº¥t solid, focus on building POS core features with established patterns.
